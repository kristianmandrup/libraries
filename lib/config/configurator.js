// Generated by LiveScript 1.2.0
(function(){
  var FileIO, Components, Container, Containers, Configurator, toString$ = {}.toString;
  FileIO = require('../file-io');
  Components = require('../component/components');
  Container = require('./container');
  Containers = require('./containers');
  module.exports = Configurator = (function(){
    Configurator.displayName = 'Configurator';
    var prototype = Configurator.prototype, constructor = Configurator;
    importAll$(prototype, arguments[0]);
    function Configurator(options){
      this.options = options != null
        ? options
        : {};
      this.file = this.options.file || './xlibs/config.json';
      this.validate();
      this.read();
      this.config = this.json().config || {};
      this;
    }
    prototype.install = function(){
      return this.components().install();
    };
    prototype.build = function(cb){
      cb || (cb = this.options.cb);
      return this.containers().build(cb);
    };
    prototype.components = function(){
      return this._components || (this._components = new Components(this));
    };
    prototype.containers = function(){
      return this._containers || (this._containers = new Containers(this.containerObjs(), this.config));
    };
    prototype.validate = function(){
      if (!this.exists()) {
        throw new Error("File " + this.file + " does not exist");
      }
      if (toString$.call(this.containers()).slice(8, -1) !== 'Object') {
        throw new Error("Must have 'containers' Object");
      }
    };
    prototype.containerObjs = function(){
      return this._containerObjs || (this._containerObjs = this.json().containers);
    };
    return Configurator;
  }(FileIO));
  function importAll$(obj, src){
    for (var key in src) obj[key] = src[key];
    return obj;
  }
}).call(this);
