// Generated by LiveScript 1.2.0
(function(){
  var path, FileNormalizer, toString$ = {}.toString;
  path = require('path');
  module.exports = FileNormalizer = (function(){
    FileNormalizer.displayName = 'FileNormalizer';
    var prototype = FileNormalizer.prototype, constructor = FileNormalizer;
    function FileNormalizer(config, file){
      this.config = config;
      this.file = file;
      this.normalized = this.config || {};
      this.validate();
      this;
    }
    prototype.validate = function(){
      if (this.file && toString$.call(this.file).slice(8, -1) !== 'String') {
        throw Error("File must be a String, was: " + this.file);
      }
      if (toString$.call(this.config).slice(8, -1) !== 'Object') {
        throw Error("Config must be an Object, was: " + this.file);
      }
    };
    prototype.normalize = function(file){
      this.file || (this.file = file);
      this.ext = this.extension();
      this.type = this.findType();
      if (this.type) {
        this.addFile();
      }
      return this.normalized;
    };
    prototype.extension = function(file){
      this.file || (this.file = file);
      return path.extname(this.file).slice(1);
    };
    prototype.findType = function(ext, file){
      var key, ref$, value;
      this.file || (this.file = file);
      this.ext || (this.ext = ext);
      for (key in ref$ = this.types) {
        value = ref$[key];
        if (value.indexOf(this.ext) > -1) {
          return key;
        }
      }
      return 'files';
    };
    prototype.types = {
      scripts: ['js', 'coffee', 'ls'],
      styles: ['css', 'less', 'scss', 'sass'],
      fonts: ['eot', 'svg', 'ttf', 'woff'],
      images: ['jpg', 'png', 'gif', 'bmp']
    };
    prototype.addFile = function(type){
      var entry, ref$, key$;
      this.type || (this.type = type);
      entry = (ref$ = this.normalized)[key$ = this.type] || (ref$[key$] = {});
      entry.files || (entry.files = []);
      if (!(entry.files.indexOf(this.file) > -1)) {
        entry.files.push(this.file);
      }
      return this;
    };
    return FileNormalizer;
  }());
}).call(this);
