// Generated by LiveScript 1.2.0
(function(){
  var path, FileNormalizer;
  path = require('path');
  module.exports = FileNormalizer = (function(){
    FileNormalizer.displayName = 'FileNormalizer';
    var prototype = FileNormalizer.prototype, constructor = FileNormalizer;
    function FileNormalizer(file, config){
      this.file = file;
      this.config = config;
      this.normalized = this.config || this.ownNormalized;
      this.validate();
      this;
    }
    prototype.validate = function(){};
    prototype.normalize = function(file){
      file || (file = this.file);
      this.type = this.findType(this.extensionOf(file), file);
      if (this.type) {
        this.addFile();
        return this.setDir();
      }
    };
    prototype.extensionOf = function(file){
      file || (file = this.file);
      return path.extname(file).slice(1);
    };
    prototype.findType = function(ext, file){
      var key, ref$, value;
      file || (file = this.file);
      for (key in ref$ = this.types) {
        value = ref$[key];
        if (value.indexOf(ext) > -1) {
          return key;
        }
      }
      return console.error("Unknown file type: " + ext + " for " + this.file);
    };
    prototype.types = {
      scripts: ['js', 'coffee', 'ls'],
      styles: ['css', 'scss', 'less', 'sass'],
      fonts: ['eof', 'svg'],
      images: ['jpg', 'png', 'gif', 'bmp']
    };
    prototype.addFile = function(type){
      var entry;
      type || (type = this.type);
      entry = this.normalized[type];
      entry.files || (entry.files = []);
      entry.files.push(this.file);
      return this;
    };
    prototype.setDir = function(type){
      var dir, entry;
      type || (type = this.type);
      dir = path.dirname(this.file);
      entry = this.normalized[type];
      if (entry.dir === void 8) {
        entry.dir = dir;
      }
      if (entry.dir !== dir) {
        entry.dir = '';
      }
      return this;
    };
    prototype.ownNormalized = {
      main: {},
      scripts: {},
      styles: {},
      fonts: {},
      images: {},
      files: {}
    };
    return FileNormalizer;
  }());
}).call(this);
