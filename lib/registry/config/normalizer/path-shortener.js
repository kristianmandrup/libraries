// Generated by LiveScript 1.2.0
(function(){
  var isBlank, PathShortener, toString$ = {}.toString;
  isBlank = function(str){
    return !str || /^\s*$/.test(str);
  };
  module.exports = PathShortener = (function(){
    PathShortener.displayName = 'PathShortener';
    var prototype = PathShortener.prototype, constructor = PathShortener;
    function PathShortener(config, root){
      this.config = config;
      this.root = root;
    }
    prototype.shortenPaths = function(){
      this.shorten();
      return this.config;
    };
    prototype.shorten = function(){
      if (this.root) {
        return this.shortenDir();
      } else {
        return this.shortenFilePaths();
      }
    };
    prototype.shortenDir = function(){
      if (isBlank(this.root)) {
        return;
      }
      if (toString$.call(this.config.dir).slice(8, -1) !== 'String') {
        return;
      }
      this.config.dir = this.config.dir.slice((this.root + '/').length);
      return this.config;
    };
    prototype.shortenFilePaths = function(){
      var shortFiles, i$, ref$, len$, file;
      shortFiles = [];
      if (toString$.call(this.config.files).slice(8, -1) !== 'Array') {
        return;
      }
      for (i$ = 0, len$ = (ref$ = this.config.files).length; i$ < len$; ++i$) {
        file = ref$[i$];
        shortFiles.push(this.shortenPath(file));
      }
      this.config.files = shortFiles;
      return this.config;
    };
    prototype.shortenPath = function(file){
      var root, matches;
      root = this.config.dir || '';
      matches = file.match(new RegExp("^(" + root + "/?)"));
      if (matches) {
        file = file.slice(matches[1].length);
      }
      return file;
    };
    return PathShortener;
  }());
}).call(this);
