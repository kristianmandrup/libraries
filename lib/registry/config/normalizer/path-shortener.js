// Generated by LiveScript 1.2.0
(function(){
  var PathShortener, toString$ = {}.toString;
  module.exports = PathShortener = (function(){
    PathShortener.displayName = 'PathShortener';
    var prototype = PathShortener.prototype, constructor = PathShortener;
    function PathShortener(config){
      this.config = config;
    }
    prototype.shortenPaths = function(){
      var key;
      for (key in this.config) {
        this.shortenPathsFor(key, this.config[key]);
      }
      return this.config;
    };
    prototype.shortenPathsFor = function(key, entry){
      var shortFiles, i$, ref$, len$, file;
      shortFiles = [];
      if (toString$.call(entry).slice(8, -1) !== 'Object') {
        return;
      }
      for (i$ = 0, len$ = (ref$ = entry.files).length; i$ < len$; ++i$) {
        file = ref$[i$];
        shortFiles.push(this.shortenPath(file));
      }
      this.config[key].files = shortFiles;
      return this.config[key];
    };
    prototype.shortenPath = function(file){
      var root, matches;
      root = this.config.dir || '';
      matches = file.match(new RegExp("^(" + root + "/?)"));
      if (matches) {
        file = file.slice(matches[1].length);
      }
      return file;
    };
    return PathShortener;
  }());
}).call(this);
