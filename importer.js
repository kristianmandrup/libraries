// Generated by LiveScript 1.2.0
(function(){
  var config, Composite, Directory, Adder, Remover, Importer;
  config = {};
  Composite = require('./composite');
  Directory = (function(){
    Directory.displayName = 'Directory';
    var prototype = Directory.prototype, constructor = Directory;
    function Directory(app, config){
      this.app = app;
      this.config = config;
    }
    prototype.validate = function(){
      if (typeof this.app !== 'Object') {
        throw new Error("Directory must take an app Object");
      }
    };
    prototype.bowerDir = function(){
      if (this.name === 'bower') {
        return this.app.bowerDirectory;
      }
    };
    prototype.dir = function(name){
      this.name = name;
      return this.config[this.name] || this.bowerDir() || this.name;
    };
    return Directory;
  }());
  Adder = require('./adder');
  Remover = require('./remover');
  module.exports = Importer = (function(){
    Importer.displayName = 'Importer';
    var prototype = Importer.prototype, constructor = Importer;
    importAll$(prototype, arguments[0]);
    importAll$(prototype, arguments[1]);
    function Importer(app, options){
      this.app = app;
      this.options = options != null
        ? options
        : {};
      this.validate();
      this.file = this.options.file || './imports/libraries.json';
      this.libs();
      this;
    }
    prototype.validate = function(){
      if (typeof this.app !== 'Object') {
        throw new Error("Importer must take an app Object as first arg");
      }
    };
    prototype.init = function(key){
      var ref$;
      return (ref$ = this.libs)[key] || (ref$[key] = {});
    };
    prototype.dir = function(name){
      return this.directory().dir(name);
    };
    prototype.directory = function(){
      return this._directory || (this._directory = new Directory(this.app, this.config));
    };
    prototype.importAll = function(){
      var key, ref$, value, results$ = [];
      this.config = this.options.config || this.libs['config'] || {};
      delete this.libs['config'];
      for (key in ref$ = this.libs) {
        value = ref$[key];
        results$.push(this.importFor(key, value));
      }
      return results$;
    };
    prototype.importFor = function(name, values){
      return new Composite(this.app, this.dir(name)).importAll(values);
    };
    return Importer;
  }(Adder, Remover));
  function importAll$(obj, src){
    for (var key in src) obj[key] = src[key];
    return obj;
  }
}).call(this);
