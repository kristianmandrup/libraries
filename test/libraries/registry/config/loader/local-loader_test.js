// Generated by LiveScript 1.2.0
(function(){
  var expect, ConfigLoader, CompositeLoader, Normalizer, log;
  expect = require('chai').expect;
  ConfigLoader = require('../../../../../lib/registry/config/loader/local-loader');
  CompositeLoader = require('../../../../../lib/registry/config/loader/local/composite-loader');
  Normalizer = require('../../../../../lib/registry/config/normalizer');
  log = console.log;
  describe('LocalConfigLoader', function(){
    var config;
    config = {
      files: ['dist/js/bootstrap.js']
    };
    describe('create', function(){
      context('invalid', function(){
        return specify('bad nam throws', function(){
          return expect(function(){
            return new ConfigLoader(7);
          }).to['throw'];
        });
      });
      return context('valid', function(){
        specify('name string is ok', function(){
          return expect(function(){
            return new ConfigLoader('x');
          }).to.not['throw'];
        });
        return specify('name, path string ok', function(){
          return expect(function(){
            return new ConfigLoader('x', 'y');
          }).to.not['throw'];
        });
      });
    });
    return describe('valid instance', function(){
      var loader;
      beforeEach(function(){
        return loader = new ConfigLoader('bootstrap');
      });
      describe('load-config', function(){
        return specify('loads config', function(){
          return expect(loader.loadConfig().dir).to.eql('dist');
        });
      });
      describe('has-local', function(){
        return specify('bootstrap is in local repo', function(){
          return expect(loader.hasConfig()).to.be['true'];
        });
      });
      describe('has-local(name)', function(){
        specify('bootstrap is in local repo', function(){
          return expect(loader.hasConfig('bootstrap')).to.be['true'];
        });
        return specify('blip is not in local repo', function(){
          return expect(loader.hasConfig('blip')).to.be['false'];
        });
      });
      describe('load-config', function(){
        before(function(){
          return log(loader.loadConfig());
        });
        specify('is combined into a local repo file path', function(){
          return expect(loader.loadConfig().dir).to.eql('dist');
        });
        return specify('blip is non-existing file path', function(){
          return expect(function(){
            return loader.loadConfig('blip').to['throw'];
          });
        });
      });
      describe('selected-loader', function(){
        return specify('selects a loader', function(){
          return expect(loader.selectedLoader()).to.eql(CompositeLoader);
        });
      });
      describe('loaders', function(){
        return specify('selects a loader', function(){
          return expect(Object.keys(loader.loaders())).to.include('composite');
        });
      });
      describe.only('normalize', function(){
        return specify('normalizes a loader', function(){
          return expect(loader.normalize(config).scripts.files).to.eql(['bootstrap.js']);
        });
      });
      describe('normalizer', function(){
        return specify('normalizes a loader', function(){
          return expect(loader.normalizer(config)).to.be.an.instanceOf(Normalizer);
        });
      });
      describe('loaded-config', function(){
        var conf;
        before(function(){
          return conf = loader.loadedConfig();
        });
        specify('dir is dist', function(){
          return expect(conf.dir).to.eql('dist');
        });
        return specify('fonts files has eof and svg', function(){
          return expect(conf.fonts.files).to.include('bootstrap.eof');
        });
      });
      return describe('adapter', function(){
        return specify('is an Adapter', function(){
          return expect(loader.loader()).to.be.an.instanceOf(CompositeLoader);
        });
      });
    });
  });
}).call(this);
